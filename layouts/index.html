{{ define "main" }}

<div class="container p-3 p-lg-5">

    <div class="row py-3">
        <div class="col col-12 col-lg-9">
            <h1 class="pb-3 fs-2">Latest articles</h1>
            <!-- Top featured article -->
            {{ range first 1 (where .Site.Pages "Type" "post") -}}
            <div class="row pb-3">
                <div class="col col-6 col-md-6">
                    {{ if isset .Params "categories" -}}
                    <div>
                        {{ range $index, $name := sort .Params.categories -}}
                            <span class="pe-2 small">
                                {{ with site.GetPage (printf "/%s" ($name | urlize )) -}}
                                    <a href="{{ .RelPermalink }}" class="text-decoration-none text-dark fw-bold">{{ .Name }}</a>
                                {{ end -}}
                            </span>
                        {{ end -}}
                    </div>
                    {{ end -}}
                    <h2 class="fs-2"><a href="{{ .Permalink }}" class="text-decoration-none text-dark">{{ .Title }}</a></h2>
                </div>
                <div class="col col-6 col-md-6">
                    <picture>
                        <img src="{{ if isset .Params "thumbnail" }}{{ .Params.thumbnail }}{{ else }}/images/posts/default.png{{ end }}" class="img-fluid" alt="">
                    </picture>
                </div>
            </div>
            {{ end -}}

            <!-- Other featured article -->
            <div class="row">
                {{ range first 3 (after 1 (where .Site.Pages "Type" "post")) -}}
                    <div class="col col-6 col-sm-4">
                        <picture class="">
                            <img src="{{ if isset .Params "thumbnail" }}{{ .Params.thumbnail }}{{ else }}/images/posts/default.png{{ end }}" class="img-fluid" alt="">
                        </picture>
                        {{ if isset .Params "categories" -}}
                        <div>
                            {{ range $index, $name := sort .Params.categories -}}
                                <span class="small pe-2 ">
                                    {{ with site.GetPage (printf "/%s" ($name | urlize )) -}}
                                        <a href="{{ .RelPermalink }}" class="text-decoration-none text-dark fw-bold">{{ .Name }}</a>
                                    {{ end -}}
                                </span>
                            {{ end -}}
                            <h3 class="fs-4"><a href="{{ .Permalink }}" class="text-decoration-none text-dark">{{ .Title }}</a></h3>
                        </div>
                        {{ end -}}
                    </div>
                {{ end -}}
            </div>
        </div>
        <div class="col col-lg-3">
            <h1 class="pb-3 fs-2">Latest talks</h1>
            {{ range sort $.Site.Data.talks "Date" "desc" | first 5 -}}
                <div class="row">
                    <div class="col pb-3">
                        <h3 class="py-0 my-0 fs-5"><a href="{{ .Slides | absURL }}" class="text-decoration-none text-dark">{{ .Title }}</a></h3>
                        <div>
                            <span class="fw-bold small">{{ .Location }}, {{ .Date | dateFormat "January 2, 2006" }}</span>
                        </div>
                    </div>
                </div>
            {{ end -}}
        </div>
    </div>

    <!-- More articles -->
    <div class="row">
        <div class="col text-center">
            <h1 class="fs-2">More articles</h1>
        </div>
    </div>
    <div class="row">
        <div class="col col-lg-10 offset-lg-1">
            {{ range first 5 (after 4 (where .Site.Pages "Type" "post")) -}}
                {{ .Render "article" }}
            {{ end -}}
        </div>
    </div>
    <div class="row">
        <div class="col text-center py-3">
            <a class="btn btn-primary" href="{{ "/posts/" | absURL }}" role="button">More articles</a>
        </div>
    </div>

</div>

{{ end }}