<!DOCTYPE html>
<html><head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
    <link rel="stylesheet" href="https://roaldnefs.com/css/theme.min.css">

    <title>Software Defined Radio on Linux &ndash; Roald Nefs</title>

    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400;1,600&family=Source+Sans+Pro:wght@300;400&display=swap" rel="stylesheet">
</head><body class="bg-gray text-dark">
    <div class="sideways meta d-none d-xl-block">Roald Nefs, SRE/DevOps engineer and open-source contributor</div>
<nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">
        <a class="navbar-brand" href="https://roaldnefs.com/">roald<strong>nefs</strong>.com</a>

        <div class="justify-content-between">

            
            
            <ul class="list-unstyled list-inline meta meta-nav text-uppercase">
                
                <li class="list-inline-item">
                    <a class="nav-link" href="https://roaldnefs.com/">Home</a>
                </li>
                
                <li class="list-inline-item">
                    <a class="nav-link" href="https://roaldnefs.com/posts/">Posts</a>
                </li>
                
            </ul>
            
        </div>
    </div>
</nav>

<article class="container bg-white p-3 p-lg-5">
    <div class="row">
        <div class="col">
            <h1>Software Defined Radio on Linux</h1>

            <p>In the quick start guide for Software Defined Radio (SDR) on Linux we will listen to some very common frequencies using a RTL-SDR. SDR is a radio communication system where traditional hardware components are  instead implemented in software. Some common low-cost DVB-T USB dongles with the Realtek RTL2832U controller and tuner can be used as a wide-band SDR receiver.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Start by installing the required packages for downloading and compiling the rtl-sdr package. The <code>libusb-1.0-0-dev</code> package provides a C library used for accessing USB devices (e.g. the RTL-SDR).</p>
<pre><code class="language-console" data-lang="console">sudo apt-get install git cmake build-essential libusb-1.0-0-dev
</code></pre><p>After retrieving the required packages you will be able to clone, build and compile the RTL-SDR Osmocom drivers from source.</p>
<pre><code class="language-console" data-lang="console">git clone git://git.osmocom.org/rtl-sdr.git
cd rtl-sdr/
mkdir build
cd build
cmake ../ -DINSTALL_UDEV_RULES=ON
make
sudo make install
sudo ldconfig
sudo cp ../rtl-sdr.rules /etc/udev/rules.d/
</code></pre><p>The RTL-SDR is normally used as a TV device and doesn’t work for SDR  purposes if we don’t block the default drivers. Create a file called <code>/etc/modprobe.d/blacklist-rtl.conf</code> using root privileges with the following content:</p>
<pre><code>blacklist dvb_usb_rtl28xxu
</code></pre><p>Save the file and reboot your system. You can test the RTL-SDR by running the following command <code>rtl_test -t</code>. The output will look similar to this:</p>
<pre><code>Found 1 device(s):
  0:  Realtek, RTL2838UHIDIR, SN: 00000001

Using device 0: Generic RTL2832U OEM
Found Rafael Micro R820T tuner
Supported gain values (29): 0.0 0.9 1.4 2.7 3.7 7.7 8.7 12.5 14.4 15.7 16.6 19.7 20.7 22.9 25.4 28.0 29.7 32.8 33.8 36.4 37.2 38.6 40.2 42.1 43.4 43.9 44.5 48.0 49.6 
[R82XX] PLL not locked!
Sampling at 2048000 S/s.
No E4000 tuner found, aborting.
</code></pre><h2 id="gqrx-sdr">Gqrx SDR</h2>
<p><img src="/images/posts/2019/01/06/sdr-01.png" alt="Gqrx software"></p>
<p>Gqrx is an open source software defined radio receiver. The package  has been included in Ubuntu for many years, but you probably want to  install a newer version using the official personal package archive (PPA).</p>
<pre><code class="language-console" data-lang="console">sudo add-apt-repository -y ppa:bladerf/bladerf
sudo add-apt-repository -y ppa:myriadrf/drivers
sudo add-apt-repository -y ppa:myriadrf/gnuradio
sudo add-apt-repository -y ppa:gqrx/gqrx-sdr
sudo apt-get update
sudo apt-get install gqrx-sdr
</code></pre><p>It is recommended that you also install the <code>libvolk1-bin</code> package and run <code>volk_profile</code> tool to optimize GNU Radio performance on your own computer.</p>
<pre><code class="language-console" data-lang="console">sudo apt-get install libvolk1-bin
volk_profile
</code></pre><p>On the first startup of Gqrx you will need to configure your device using the following settings:</p>
<pre><code>Device: Realtek RTL2838xxx
Device string: rtl=0
Input rate: 1800000
Decimation: None
Bandwidth: 0 MHz
LNB LO: 0 MHz
</code></pre><p><strong>Note:</strong> you can always change your device configuration by clicking the circuit board icon in the menu.</p>
<p>Lookup the frequency of one of your local radio stations and update the frequency in the <em>Receiver Options</em> tab on the right side of Gqrx. Don’t forget to set the mode to <em>WFM (mono)</em> or <em>WFM (stereo)</em>. You might need to change the gain in order to hear something.</p>
<h2 id="p2000">P2000</h2>
<p><img src="/images/posts/2019/01/06/sdr-02.png" alt="P2000"></p>
<p><strong>P2000</strong> is a one-way communications network for pagers  based on the FLEX-protocol developed by Motorola. The P2000 network is  used by the emergency services in the Netherlands. The FLEX-protocol  does not provide encryption, so you can read the messages yourself using  an RTL-SDR.</p>
<p>In order to receive and decode the FLEX messages we will be using <code>multimon-ng</code>, which can be installed from source:</p>
<pre><code class="language-console" data-lang="console">git clone https://github.com/EliasOenal/multimon-ng.git
cd multimon-ng
mkdir build
cd build
cmake ..
make
sudo make install
</code></pre><p>Connect your RTL-SDR and run the following command to receive the FLEX messages send on the P2000 network.</p>
<pre><code class="language-console" data-lang="console">rtl_fm -f 169.65M -M fm -s 22050 | multimon-ng -a FLEX -t raw /dev/stdin
</code></pre><p><strong>Note:</strong> it might take several minutes before you start  receiving any message, you can always check an online P2000 feed for  messages appearing in your local region.</p>
<h2 id="air-traffic-monitoring">Air traffic monitoring</h2>
<p>You can monitor air traffic using an RTL SDR and the <code>dump1090</code> package. Start by downloading and compiling the <code>dump1090</code> package:</p>
<pre><code class="language-console" data-lang="console">git clone https://github.com/MalcolmRobb/dump1090.git
cd dump1090
make
</code></pre><p>To run dump1090 in interactive mode, with networking support, you will need to run the following command:</p>
<pre><code class="language-console" data-lang="console">./dump1090 --interactive --net
</code></pre><p>Open your browser and open <code>http://localhost:8080/</code> to see live air traffic:</p>
<p><img src="/images/posts/2019/01/06/sdr-03.png" alt="dump1090"></p>
<h2 id="raspberry-pi-as-a-rf-transmitter">Raspberry Pi as a RF transmitter</h2>
<p>Using the <code>rpitx</code> package you can turn your Raspberry Pi  in a simple radio frequency transmitter. It will be able to handle  frequencies between 5KHz and 1500MHz. This includes some common  frequencies (e.g. 433MHz).</p>
<p><strong>Note:</strong> it might not be legal to transmit on all available frequencies, check your local regulations before transmitting anything!</p>
<p>You will need to plug a wire on GPIO 4, which will act as the antenna. I’ve used a cheap breadboard cable (<em>see the picture below</em>). The optimal length of the wire depends on the frequency, but a few centimeters should be fine for local testing.</p>
<p><img src="/images/posts/2019/01/06/sdr-04.jpg" alt="Antenna on a Raspberry Pi"></p>
<p>After installing Raspbian you can install the <code>rpitx</code> package using the following commands.</p>
<pre><code class="language-console" data-lang="console">git clone https://github.com/F5OEO/rpitx
cd rpitx
./install.sh
sudo reboot
</code></pre><p>After rebooting the Raspberry Pi you can go to your <code>rpitx</code> folder and launch <code>easytest.sh</code>:</p>
<pre><code class="language-console" data-lang="console">cd rpitx
./easytest.sh
</code></pre><p>Using your SDR receiver you will be able to monitor the transmitted  signals. Try to send the some test signals on the 434 MHz, the rpitx  default band.</p>
<p><img src="/images/posts/2019/01/06/sdr-05.png" alt="easytest"></p>

        </div>
    </div>
    <div class="row">
        <div class="col">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "roaldnefs" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</article>

<footer class="container py-4">
    <div class="row">
        <div class="col-lg-4 offset-lg-1 offset-md-2 offset-sm-1 pb-2">
            <p class="meta">
              Roald Nefs, SRE/DevOps engineer and open-source contributor<br />
              Copyright &copy 2019-2021 Roald Nefs. All Rights Reserved.
            </p>
        </div>
        <div class="col-lg-2 col-sm-3 offset-md-2 offset-sm-1 pb-2 pb-sm-0">
            <ul class="list-unstyled text-uppercase meta">
                <li>
                    <a href="https://github.com/roaldnefs">gh/roaldnefs</a>
                </li>
                <li>
                    <a href="https://twitter.com/roaldnefs">tw/roaldnefs</a>
                </li>
                <li>
                    <a href="https://linkedin.com/in/roaldnefs">in/roaldnefs</a>
                </li>
            </ul>
        </div>
        <div class="col-lg-1 col-sm-3 pb-2 pb-sm-0">
            <ul class="list-unstyled text-uppercase meta">
                <li>
                    <a href="https://roaldnefs.com/posts/index.xml">RSS</a>
                </li>
                <li>
                    <a href="https://roaldnefs.com/posts/">Posts</a>
                </li>
            </ul>
        </div>
        <div class="col-lg-1 col-sm-3">
            <ul class="list-unstyled text-uppercase meta">
                <li>
                    <a href="https://roaldnefs.com/"><strong>Home</strong></a>
                </li>
            </ul>
        </div>
    </div>
</footer><script src="https://roaldnefs.com/js/jquery.min.js"></script>
<script src="https://roaldnefs.com/js/bootstrap.min.js"></script>
</body>
</html>